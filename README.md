# Task Manager API

Task Manager API - проект, позволяющий создавать, редактировать и удалять задачи.

## Основные функции

- **Управление пользователями**:
  - Создание, чтение, обновление и удаление пользователей.
  - Аутентификация через JWT-токены.
- **Управление задачами**:
  - Создание, чтение, обновление и удаление задач.
  - Задачи доступны только их владельцам.
- **Автоматическая документация API**:
  - Документация доступна через Swagger UI по адресу `http://127.0.0.1:8000/swagger/`.

## Технологии

- **Python** (версия 3.9+)
- **Django** (веб-фреймворк)
- **Django REST Framework** (DRF) для создания API
- **Simple JWT** для аутентификации
- **PostgreSQL** (база данных)
- **DRF-YASG** для автоматической документации API
- **Docker** (для контейнеризации)
  
## Установка и запуск

1. Склонируйте репозиторий к себе на ПК и создайте .env файл в корневой директории проекта
    ```
    git clone https://github.com/raznodumova/DjangoTask.git
   cd DjangoApi
   cp .env.template .env
   ```
2. Заполните .env афйл
    ```
    SECRET_KEY="your-secret-key"
    DEBUG = True
   ```
3. Запуск контейнера 
    ```
   docker-compose up -d --build
   ```
4. Создание суперпользователя
    ```
   docker-compose exec web python manage.py createsuperuser
   ```
5. Запуск тестов
    ```
   docker-compose exec web python manage.py test app
   ```
6. Остановка контейнера
    ```
   docker-compose down
   ```

## Примеры запросов

- Получение токена
    ```
  curl -X POST http://localhost:8000/api/token/ \
  -H "Content-Type: application/json" \
  -d '{"username": "admin", "password": "adminpass"}'
  ```
- Создание задачи
    ```
  curl -X POST http://localhost:8000/api/tasks/ \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"title": "Докеризировать проект", "description": "Настроить Docker"}'
  ```
## Маршруты API

### Аутентификация
| Метод  | Эндпоинт               | Описание                                      | Доступ          |
|--------|-------------------------|-----------------------------------------------|-----------------|
| `POST` | `http://127.0.0.1:8000/api/token/`          | Получение JWT-токенов (access + refresh)      | Все пользователи|
| `POST` | `http://127.0.0.1:8000/api/token/refresh/`  | Обновление access-токена                      | Все пользователи|

---

### Задачи (Tasks)
| Метод   | Эндпоинт                | Описание                                      | Доступ          |
|---------|-------------------------|-----------------------------------------------|-----------------|
| `GET`   | `http://127.0.0.1:8000/api/tasks/`           | Получить список всех задач пользователя       | Аутентифицированные|
| `POST`  | `http://127.0.0.1:8000/api/tasks/`           | Создать новую задачу                          | Аутентифицированные|
| `GET`   | `http://127.0.0.1:8000/api/tasks/{id}/`      | Получить задачу по ID                         | Владелец задачи |
| `PUT`   | `http://127.0.0.1:8000/api/tasks/{id}/`      | Полное обновление задачи                      | Владелец задачи |
| `PATCH` | `http://127.0.0.1:8000/api/tasks/{id}/`      | Частичное обновление задачи                   | Владелец задачи |
| `DELETE`| `http://127.0.0.1:8000/api/tasks/{id}/`      | Удалить задачу                                | Владелец задачи |

**Поля задачи**:
```
{
  "title": "Название",
  "description": "Описание",
  "status": "new/in_progress/completed"
}
```

### Пользователи (Users)

| Метод   | Эндпоинт               | Описание                          | Доступ          |
|---------|-------------------------|-----------------------------------|-----------------|
| `GET`   | `http://127.0.0.1:8000/api/users/`           | Получить список пользователей     | Только админы   |
| `POST`  | `http://127.0.0.1:8000/api/users/`           | Создать нового пользователя       | Только админы   |
| `GET`   | `http://127.0.0.1:8000/api/users/{id}/`      | Получить пользователя по ID       | Только админы   |

**Поля пользователя**:
```
{
  "username": "Логин",
  "email": "email@example.com",
  "password": "Пароль"
}
```